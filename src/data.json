{
  "metadata": {
    "version": "1.0.0",
    "brand": "SmartDuck",
    "locale_default": "fr",
    "disclaimer": "Toutes les donn√©es sont factices pour un exercice (tarifs, horaires, adresses, promos).",
    "notes": "Approche mots-cl√©s/regex/fuzzy. Les regex sont insensibles √† la casse. Les entit√©s sont √† adapter si besoin."
  },
  "entities": {
    "zone": [
      "aisselles",
      "jambes compl√®tes",
      "demi-jambes",
      "avant-bras",
      "bras complets",
      "maillot classique",
      "maillot int√©gral",
      "torse",
      "dos",
      "visage",
      "l√®vre sup√©rieure",
      "menton",
      "joues",
      "nuque"
    ],
    "ville": [
      "Paris 15e",
      "Lyon Part-Dieu",
      "Marseille Prado",
      "Lille Centre",
      "Bordeaux Chartrons",
      "Toulouse Jean-Jaur√®s",
      "Nantes Graslin"
    ],
    "jour": ["lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"],
    "mode_paiement": ["carte", "esp√®ces", "virement", "paypal"],
    "canal": ["whatsapp", "site", "t√©l√©phone"]
  },
  "variables_defaults": {
    "booking_url": "https://exemple.smartduck.fr/reserver",
    "pricing_url": "https://exemple.smartduck.fr/tarifs",
    "faq_url": "https://exemple.smartduck.fr/faq",
    "privacy_url": "https://exemple.smartduck.fr/confidentialite",
    "contact_phone": "+33 1 86 00 00 00",
    "contact_email": "contact@smartduck.fr"
  },
  "kb": {
    "tarifs": {
      "monozone": [
        { "zone": "aisselles", "prix": 39 },
        { "zone": "demi-jambes", "prix": 79 },
        { "zone": "jambes compl√®tes", "prix": 149 },
        { "zone": "maillot classique", "prix": 59 },
        { "zone": "maillot int√©gral", "prix": 89 },
        { "zone": "avant-bras", "prix": 69 },
        { "zone": "torse", "prix": 129 },
        { "zone": "dos", "prix": 139 },
        { "zone": "visage", "prix": 59 },
        { "zone": "bras complets", "prix": 89 }
      ],
      "packs": [
        { "nom": "Pack 3 s√©ances - petites zones", "zones": ["aisselles", "l√®vre sup√©rieure", "menton"], "prix": 99 },
        { "nom": "Pack 6 s√©ances - jambes compl√®tes", "zones": ["jambes compl√®tes"], "prix": 799 },
        { "nom": "Pack Duo - maillot + aisselles (3 s√©ances)", "zones": ["maillot classique", "aisselles"], "prix": 239 }
      ],
      "promos_actives": [
        { "nom": "Offre de lancement", "desc": "-15% sur la 1√®re s√©ance", "code": "DUCK15", "expire_le": "2025-12-31" }
      ]
    },
    "horaires": {
      "Paris 15e": { "lun_ven": "09:30‚Äì19:30", "sam": "10:00‚Äì18:00" },
      "Lyon Part-Dieu": { "lun_ven": "10:00‚Äì19:00", "sam": "10:00‚Äì17:00" },
      "Marseille Prado": { "lun_ven": "09:30‚Äì19:00", "sam": "10:00‚Äì17:00" }
    },
    "adresses": {
      "Paris 15e": "12 Rue des Canetons, 75015 Paris",
      "Lyon Part-Dieu": "5 Rue du Lac, 69003 Lyon",
      "Marseille Prado": "80 Av. du Prado, 13008 Marseille"
    },
    "protocole": {
      "seances_typiques": "6 √† 8 s√©ances (exercice), espac√©es de 4 √† 6 semaines.",
      "duree_seance": "De 15 √† 60 minutes selon la zone.",
      "avant_seance": [
        "Raser la zone 24‚Äì48h avant.",
        "Pas d‚Äôautobronzant 7 jours avant.",
        "Peau propre et s√®che le jour J."
      ],
      "apres_seance": [
        "Hydrater la zone 24‚Äì48h.",
        "√âviter soleil/UV 48h.",
        "Pas de gommage 72h."
      ],
      "douleur": "Sensations de picotements brefs; intensit√© variable selon la zone (exercice)."
    },
    "paiement": {
      "moyens_acceptes": ["carte", "esp√®ces"],
      "facilites": "Possibilit√© d‚Äô√©chelonner √† partir de 200‚Ç¨ (exercice)."
    },
    "entreprise": {
      "pitch": "√âpilation laser premium, parcours clair, tarifs transparents (exercice).",
      "certifs": ["Op√©rateurs form√©s (exercice)", "Tra√ßabilit√© des s√©ances (exercice)"],
      "delai_contact": "R√©ponse sous 24h ouvr√©es (exercice)."
    }
  },
  "intents": [
    {
      "id": "greetings",
      "description": "Salutations et entr√©e en mati√®re",
      "priority": 10,
      "patterns": [
        "\\b(bonjour|salut|hello|coucou|bonsoir)\\b",
        "\\b(j\\s*ai|j aimerais|je voudrais).*\\b(information|renseignement)\\b"
      ],
      "fuzzy": ["bonjoru", "bonjoure", "slut", "bonsoirr"],
      "examples_user": ["Bonjour", "Salut, j‚Äôai une question", "Hello SmartDuck"],
      "response": {
        "template_fr": "Bonjour üëã Je suis l‚Äôassistant SmartDuck (exercice). Je peux vous aider sur : *Tarifs*, *Prestations*, *RDV*, *Horaires*, *Contact*. Dites-moi ce que vous cherchez üòâ",
        "quick_replies": ["Tarifs", "Prestations", "Prendre RDV", "Horaires", "Contact"]
      }
    },
    {
      "id": "help_menu",
      "description": "Pr√©senter le menu d‚Äôaide",
      "priority": 9,
      "patterns": [
        "\\b(aide|menu|options?|que peux[- ]tu faire|comment ca marche)\\b"
      ],
      "examples_user": ["Tu fais quoi ?", "Aide", "Montre le menu"],
      "response": {
        "template_fr": "Voici ce que je peux faire :\n‚Ä¢ Tarifs par zone et packs\n‚Ä¢ Prestations & protocole (exercice)\n‚Ä¢ Prise de RDV (lien)\n‚Ä¢ Horaires & adresses\n‚Ä¢ Contact\n\nQue puis-je faire pour vous ?",
        "quick_replies": ["Tarifs", "Prestations", "Prendre RDV", "Horaires", "Contact"]
      }
    },
    {
      "id": "pricing_general",
      "description": "Questions g√©n√©rales sur les prix",
      "priority": 8,
      "patterns": [
        "\\b(tarif|tarifs|prix|devis|combien|‚Ç¨|euro|cher|cout|co√ªt)\\b"
      ],
      "examples_user": ["Quels sont vos tarifs ?", "Combien √ßa co√ªte ?", "Avez-vous des packs ?"],
      "response": {
        "template_fr": "Voici un aper√ßu (exercice) :\n- Aisselles : 39‚Ç¨ / s√©ance\n- Demi-jambes : 79‚Ç¨ / s√©ance\n- Jambes compl√®tes : 149‚Ç¨ / s√©ance\n- Maillot classique : 59‚Ç¨ / s√©ance\n\nüëâ Grille compl√®te : {pricing_url}\nVous pouvez me dire une *zone* pr√©cise pour le d√©tail.",
        "quick_replies": ["Aisselles", "Demi-jambes", "Jambes compl√®tes", "Maillot", "Voir les packs"]
      }
    },
    {
      "id": "pricing_zone",
      "description": "Prix pour une zone donn√©e",
      "priority": 8,
      "patterns": [
        "(tarif|prix).*(aisselles|demi[- ]?jambes?|jambes? compl[e√©]tes?|maillot|torse|dos|avant[- ]?bras|visage|levre|l[e√®]vre|menton|joues|nuque)",
        "(combien|prix).*(aisselles|demi[- ]?jambes?|jambes? compl[e√©]tes?|maillot|torse|dos|avant[- ]?bras|visage|levre|l[e√®]vre|menton|joues|nuque)"
      ],
      "slots": [
        {
          "name": "zone",
          "type": "zone",
          "required": true,
          "prompt_fr": "Pour quelle *zone* souhaitez-vous le tarif ? (ex: aisselles, demi-jambes, maillot‚Ä¶)"
        }
      ],
      "examples_user": ["Prix aisselles ?", "Tarif jambes compl√®tes", "Combien pour le maillot ?"],
      "response": {
        "template_fr": "Tarif (exercice) pour **{zone}** : **{prix_zone}‚Ç¨ / s√©ance**.\nPacks disponibles selon la zone. üëâ Grille compl√®te : {pricing_url}",
        "variables": ["zone", "prix_zone"],
        "quick_replies": ["Voir les packs", "Prendre RDV", "Autre zone"]
      }
    },
    {
      "id": "pricing_packs",
      "description": "Packs et promotions",
      "priority": 7,
      "patterns": [
        "\\b(pack|forfait|abonnement|promo|promotion|reduction|r√©duction|code promo|offre)\\b"
      ],
      "examples_user": ["Avez-vous des packs ?", "Des promos en ce moment ?"],
      "response": {
        "template_fr": "Voici nos offres (exercice) :\n- Pack 3 s√©ances petites zones : 99‚Ç¨\n- Pack 6 s√©ances jambes compl√®tes : 799‚Ç¨\n- Pack Duo maillot + aisselles (3 s√©ances) : 239‚Ç¨\n- Promo active : 'DUCK15' = -15% 1√®re s√©ance (jusqu'au 31/12/2025)\nD√©tails : {pricing_url}",
        "quick_replies": ["Prendre RDV", "Tarifs par zone", "Conditions de l‚Äôoffre"]
      }
    },
    {
      "id": "services_zones",
      "description": "Prestations et zones trait√©es",
      "priority": 8,
      "patterns": [
        "\\b(prestations?|services?|zones?|traitements?)\\b",
        "quelles? zones? traitez"
      ],
      "examples_user": ["Quelles zones traitez-vous ?", "Quelles prestations ?", "Faites-vous le visage ?"],
      "response": {
        "template_fr": "Nous proposons (exercice) : aisselles, jambes (demi/compl√®tes), maillot (classique/int√©gral), avant-bras, torse, dos, visage (l√®vre, menton, joues), nuque. Dites une zone pour conna√Ætre le tarif.",
        "quick_replies": ["Tarif Aisselles", "Tarif Jambes compl√®tes", "Tarif Maillot", "Prendre RDV"]
      }
    },
    {
      "id": "protocol_overview",
      "description": "Protocole : nb de s√©ances, rythme, dur√©e",
      "priority": 6,
      "patterns": [
        "\\b(seances?|s√©ances?|nombre de seances?|combien de seances?)\\b",
        "\\b(rythme|intervalle|frequence|fr√©quence)\\b",
        "\\b(duree|dur√©e)\\b"
      ],
      "examples_user": ["Combien de s√©ances ?", "Tous les combien ?", "Dur√©e d'une s√©ance ?"],
      "response": {
        "template_fr": "En moyenne **6 √† 8 s√©ances** (exercice), espac√©es de **4 √† 6 semaines**. Dur√©e par s√©ance : **15 √† 60 min** selon la zone.",
        "quick_replies": ["Pr√©parer ma s√©ance", "Apr√®s la s√©ance", "Prendre RDV"]
      }
    },
    {
      "id": "prep_before",
      "description": "Conseils avant la s√©ance",
      "priority": 5,
      "patterns": [
        "avant la seance|preparer la seance|preparation|raser|rasage|venir comment"
      ],
      "examples_user": ["Comment pr√©parer la s√©ance ?", "Faut-il raser avant ?", "Que faire avant ?"],
      "response": {
        "template_fr": "Avant la s√©ance (exercice) :\n‚Ä¢ Raser la zone 24‚Äì48h avant\n‚Ä¢ Pas d‚Äôautobronzant 7 jours avant\n‚Ä¢ Peau propre et s√®che le jour J",
        "quick_replies": ["Apr√®s la s√©ance", "Prendre RDV"]
      }
    },
    {
      "id": "aftercare",
      "description": "Conseils apr√®s la s√©ance",
      "priority": 5,
      "patterns": [
        "apres la seance|apr√®s la s√©ance|soins apres|apres|rougeurs"
      ],
      "examples_user": ["Que faire apr√®s ?", "Y a-t-il des soins apr√®s ?", "Rougeurs, que faire ?"],
      "response": {
        "template_fr": "Apr√®s la s√©ance (exercice) :\n‚Ä¢ Hydrater 24‚Äì48h\n‚Ä¢ √âviter soleil/UV 48h\n‚Ä¢ Pas de gommage 72h",
        "quick_replies": ["Pr√©parer ma s√©ance", "Prendre RDV"]
      }
    },
    {
      "id": "pain_tolerance",
      "description": "Ressenti / douleur (formulation prudente, non m√©dicale)",
      "priority": 4,
      "patterns": [
        "\\b(douleur|douloureux|ca fait mal|√ßa fait mal|sensations?)\\b"
      ],
      "examples_user": ["Est-ce que √ßa fait mal ?", "Niveau de douleur ?"],
      "response": {
        "template_fr": "La plupart des personnes d√©crivent des **picotements brefs** (exercice). L‚Äôintensit√© varie selon la zone et la sensibilit√©.",
        "quick_replies": ["Combien de s√©ances ?", "Prendre RDV"]
      }
    },
    {
      "id": "booking",
      "description": "Prise de rendez-vous",
      "priority": 9,
      "patterns": [
        "\\b(rdv|rendez.?vous|reser(v|)ation|prendre rdv|book|appointment)\\b"
      ],
      "examples_user": ["Je veux prendre RDV", "Comment r√©server ?"],
      "response": {
        "template_fr": "Pour r√©server, cliquez ici üëâ {booking_url}\nSouhaitez-vous choisir une ville d‚Äôabord ?",
        "quick_replies": ["Paris 15e", "Lyon Part-Dieu", "Marseille Prado", "Par t√©l√©phone"]
      }
    },
    {
      "id": "reschedule_cancel",
      "description": "Modifier/annuler un rendez-vous",
      "priority": 6,
      "patterns": [
        "deplacer|d√©placer|annuler|modifier.*rdv"
      ],
      "examples_user": ["Je dois annuler", "Je veux d√©placer mon RDV"],
      "response": {
        "template_fr": "Pas de souci (exercice) : vous pouvez **modifier/annuler** via l‚Äôemail/SMS de confirmation, ou contactez-nous : {contact_phone}.",
        "quick_replies": ["Contacter", "Nouveau RDV"]
      }
    },
    {
      "id": "locations",
      "description": "Adresses et villes",
      "priority": 7,
      "patterns": [
        "\\b(ou|o√π|adresses?|adresse|localisation|magasin|salon|centre|agence)\\b"
      ],
      "examples_user": ["Vous √™tes o√π ?", "Adresse Paris ?", "Avez-vous un centre √† Lyon ?"],
      "response": {
        "template_fr": "Nous accueillons (exercice) :\n‚Ä¢ Paris 15e ‚Äî 12 Rue des Canetons, 75015\n‚Ä¢ Lyon Part-Dieu ‚Äî 5 Rue du Lac, 69003\n‚Ä¢ Marseille Prado ‚Äî 80 Av. du Prado, 13008\nSouhaitez-vous les horaires ?",
        "quick_replies": ["Horaires Paris 15e", "Horaires Lyon", "Prendre RDV"]
      }
    },
    {
      "id": "opening_hours",
      "description": "Horaires d‚Äôouverture (globaux ou par ville)",
      "priority": 7,
      "patterns": [
        "horaires?|ouvert|ouverture|fermeture|heures d ouverture"
      ],
      "slots": [
        { "name": "ville", "type": "ville", "required": false, "prompt_fr": "Pour quelle ville voulez-vous les horaires ?" }
      ],
      "examples_user": ["Quels sont vos horaires ?", "Horaires Paris 15e ?"],
      "response": {
        "template_fr": "Horaires (exercice) pour **{ville_ou_global}** : {horaires_ville}\nAstuce : r√©servez en ligne pour voir les cr√©neaux en temps r√©el üëâ {booking_url}",
        "variables": ["ville_ou_global", "horaires_ville"],
        "quick_replies": ["Prendre RDV", "Adresse"]
      }
    },
    {
      "id": "contact",
      "description": "Coordonn√©es de contact",
      "priority": 6,
      "patterns": [
        "contact|telephone|t[e√©]l[e√©]phone|num[e√©]ro|mail|email|e[- ]?mail|joindre"
      ],
      "examples_user": ["Un num√©ro ?", "Je peux vous joindre comment ?"],
      "response": {
        "template_fr": "Vous pouvez nous joindre (exercice) :\n‚Ä¢ T√©l√©phone : {contact_phone}\n‚Ä¢ Email : {contact_email}\n‚Ä¢ Formulaire : {faq_url}",
        "quick_replies": ["Prendre RDV", "Horaires", "Tarifs"]
      }
    },
    {
      "id": "payment",
      "description": "Moyens de paiement et facilit√©s",
      "priority": 4,
      "patterns": [
        "payer|paiement|carte|especes|esp√®ces|virement|paypal|cb|visa|mastercard|amex"
      ],
      "examples_user": ["Prenez-vous la carte ?", "Paiement en plusieurs fois ?"],
      "response": {
        "template_fr": "Moyens accept√©s (exercice) : **carte** et **esp√®ces**. √âchelonnement possible √† partir de 200‚Ç¨.",
        "quick_replies": ["Tarifs", "Prendre RDV"]
      }
    },
    {
      "id": "promo_conditions",
      "description": "Conditions des promos/codes",
      "priority": 4,
      "patterns": [
        "conditions? (de )?l offre|code promo|utiliser.*code|valable jusqu"
      ],
      "examples_user": ["Conditions DUCK15 ?", "Le code marche jusqu‚Äô√† quand ?"],
      "response": {
        "template_fr": "Code **DUCK15** (exercice) : -15% sur la 1√®re s√©ance, valable jusqu‚Äôau 31/12/2025, non cumulable, hors packs.",
        "quick_replies": ["Tarifs", "Prendre RDV"]
      }
    },
    {
      "id": "about_company",
      "description": "√Ä propos / pitch / garanties",
      "priority": 3,
      "patterns": [
        "qui etes vous|qui √™tes vous|a propos|√† propos|smartduck|qualite|qualit√©|garanties?|certif|certifications?"
      ],
      "examples_user": ["C‚Äôest quoi SmartDuck ?", "Avez-vous des garanties ?"],
      "response": {
        "template_fr": "SmartDuck (exercice) : √©pilation laser premium, parcours clair et tarifs transparents. Op√©rateurs form√©s et suivi rigoureux.",
        "quick_replies": ["Tarifs", "Prestations", "Prendre RDV"]
      }
    },
    {
      "id": "privacy_gdpr",
      "description": "Confidentialit√© & donn√©es (exercice, non contractuel)",
      "priority": 2,
      "patterns": [
        "donnees|donn√©es|rgpd|confidentialit[e√©]|privacy|vie priv[e√©]e"
      ],
      "examples_user": ["Que faites-vous de mes donn√©es ?", "RGPD ?"],
      "response": {
        "template_fr": "Exercice : vos √©changes servent √† r√©pondre √† vos questions et √† am√©liorer le service. Plus d‚Äôinfos : {privacy_url}.",
        "quick_replies": ["Contact", "Prendre RDV"]
      }
    },
    {
      "id": "handoff_human",
      "description": "Basculer vers un humain",
      "priority": 1,
      "patterns": [
        "parler.*(humain|conseiller|personne)|rappeler|appel.*conseiller"
      ],
      "examples_user": ["Je veux parler √† quelqu‚Äôun", "Puis-je √™tre rappel√© ?"],
      "response": {
        "template_fr": "Je transmets (exercice) √† un conseiller. L‚Äôun d‚Äôeux vous recontacte sous 24h ouvr√©es. Laissez *nom* et *num√©ro*, svp.",
        "quick_replies": ["Laisser mes coordonn√©es", "Contact"]
      }
    },
    {
      "id": "thanks",
      "description": "Remerciements",
      "priority": 10,
      "patterns": [
        "\\b(merci|thanks|thx|thank you)\\b"
      ],
      "examples_user": ["Merci !", "Cimer"],
      "response": {
        "template_fr": "Avec plaisir üß° Si besoin, je peux aussi vous donner les *tarifs*, *horaires* ou un lien pour *prendre RDV*.",
        "quick_replies": ["Tarifs", "Prendre RDV", "Horaires"]
      }
    },
    {
      "id": "fallback_unknown",
      "description": "Quand aucune r√®gle ne matche",
      "priority": 0,
      "patterns": [],
      "response": {
        "template_fr": "Je n‚Äôai pas bien compris üòÖ Pouvez-vous reformuler ? Exemples : *Tarifs*, *Prestations*, *Prendre RDV*, *Horaires*, *Contact*.",
        "quick_replies": ["Tarifs", "Prestations", "Prendre RDV", "Contact"]
      }
    }
  ],
  "post_processing": {
    "normalize": {
      "lowercase": true,
      "remove_accents": true,
      "trim": true,
      "collapse_spaces": true
    },
    "fuzzy": {
      "max_distance": 2,
      "apply_on": ["keywords_user", "entities.zone", "entities.ville"]
    }
  },
  "routing": {
    "order": ["greetings", "help_menu", "pricing_zone", "pricing_general", "pricing_packs", "services_zones", "booking", "locations", "opening_hours", "contact", "protocol_overview", "prep_before", "aftercare", "pain_tolerance", "payment", "promo_conditions", "about_company", "privacy_gdpr", "thanks", "handoff_human", "fallback_unknown"],
    "stop_on_first_match": true
  },
  "templates_helpers": {
    "zone_to_price_map_hint": "Au runtime, mappez {zone} -> prix depuis kb.tarifs.monozone.",
    "opening_hours_builder_hint": "Si {ville} manquante, renvoyer un r√©sum√© global (ex: \"lun‚Äìven 10‚Äì19, sam 10‚Äì17\").",
    "buttons_actions_supported": ["OPEN_URL", "CALL_PHONE", "COPY_CODE", "BOOKING"]
  }
}
